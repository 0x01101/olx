import { Bid, Product, RawBidRecord, RawProductRecord, RawTransactionRecord, Transaction } from "@/app/lib/definitions";

export const assembleProduct = (rawRecord: RawProductRecord): Product => ({
    id:          rawRecord.id,
    uuid:        rawRecord.uuid,
    condition:   rawRecord.condition,
    name:        rawRecord.name,
    description: rawRecord.description,
    price:       rawRecord.price,
    negotiable:  rawRecord.negotiable,
    active:      rawRecord.active,
    created_at:  rawRecord.created_at,
    category:    {
        id:         rawRecord.category_id,
        name:       rawRecord.category_name,
        logo_path:  rawRecord.category_logo_path,
        created_at: rawRecord.category_created_at,
    },
    seller:      {
        id:         rawRecord.seller_id,
        uuid:       rawRecord.seller_uuid,
        username:   rawRecord.seller_username,
        email:      rawRecord.seller_email,
        password:   rawRecord.seller_password,
        role:       rawRecord.seller_role,
        created_at: rawRecord.seller_created_at,
    },
});

export const assembleBid = (rawBid: RawBidRecord): Bid => ({
    id:         rawBid.id,
    amount:     rawBid.amount,
    created_at: rawBid.created_at,
    user:       {
        id:         rawBid.user_id,
        uuid:       rawBid.uuid,
        username:   rawBid.username,
        email:      rawBid.email,
        password:   rawBid.password,
        role:       rawBid.role,
        created_at: rawBid.user_created_at,
    },
    product:    {
        id:          rawBid.product_id,
        uuid:        rawBid.product_uuid,
        condition:   rawBid.condition,
        name:        rawBid.product_name,
        description: rawBid.product_description,
        price:       rawBid.product_price,
        negotiable:  rawBid.negotiable,
        active:      rawBid.active,
        created_at:  rawBid.product_created_at,
        category:    {
            id:         rawBid.category_id,
            name:       rawBid.category_name,
            logo_path:  rawBid.category_logo_path,
            created_at: rawBid.category_created_at,
        },
        seller:      {
            id:         rawBid.seller_id,
            uuid:       rawBid.seller_uuid,
            username:   rawBid.seller_username,
            email:      rawBid.seller_email,
            password:   rawBid.seller_password,
            role:       rawBid.seller_role,
            created_at: rawBid.seller_created_at,
        },
    },
});

export const assembleTransaction = (rawTransaction: RawTransactionRecord): Transaction => ({
    id:         rawTransaction.id,
    amount:     rawTransaction.amount,
    created_at: rawTransaction.created_at,
    bidder:     {
        id:         rawTransaction.bidder_id,
        uuid:       rawTransaction.bidder_uuid,
        username:   rawTransaction.bidder_username,
        email:      rawTransaction.bidder_email,
        password:   rawTransaction.bidder_password,
        role:       rawTransaction.bidder_role,
        created_at: rawTransaction.bidder_created_at,
    },
    seller:     {
        id:         rawTransaction.seller_id,
        uuid:       rawTransaction.seller_uuid,
        username:   rawTransaction.seller_username,
        email:      rawTransaction.seller_email,
        password:   rawTransaction.seller_password,
        role:       rawTransaction.seller_role,
        created_at: rawTransaction.seller_created_at,
    },
    product:    {
        id:          rawTransaction.product_id,
        uuid:        rawTransaction.product_uuid,
        condition: rawTransaction.product_condition,
        name:        rawTransaction.product_name,
        description: rawTransaction.product_description,
        price:       rawTransaction.product_price,
        negotiable: rawTransaction.product_negotiable,
        active: rawTransaction.product_active,
        created_at:  rawTransaction.product_created_at,
        category:    {
            id:         rawTransaction.category_id,
            name:       rawTransaction.category_name,
            logo_path:  rawTransaction.category_logo_path,
            created_at: rawTransaction.category_created_at,
        },
        seller:      {
            id:         rawTransaction.seller_id,
            uuid:       rawTransaction.seller_uuid,
            username:   rawTransaction.seller_username,
            email:      rawTransaction.seller_email,
            password:   rawTransaction.seller_password,
            role:       rawTransaction.seller_role,
            created_at: rawTransaction.seller_created_at,
        },
    },
});